<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>S T A R B L O O D</title>
    <style>
        :root {
            --blood-dark: #8a0000;
            --blood-glow: #ff3333;
            /* Scale cards based on height to prevent bottom clipping */
            --card-h: clamp(90px, 15dvh, 140px);
            --card-w: calc(var(--card-h) * 0.7);
            --gap: clamp(6px, 1.5dvh, 12px);
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            background:#000; color:white;
            font-family:'Courier New', monospace;
            height: 100dvh; width:100vw;
            overflow:hidden; 
            touch-action:none;
            -webkit-user-select:none; user-select:none;
            display: flex;
            flex-direction: column;
        }

        .blood-header {
            padding: 15px 0;
            color:var(--blood-glow); letter-spacing:10px;
            font-size:clamp(1.4rem, 6vw, 2.4rem);
            text-shadow:0 0 16px var(--blood-dark);
            pointer-events:none; opacity:0.92; text-align:center;
            z-index: 1000;
        }

        #game-board {
            flex: 1;
            display:grid; 
            grid-template-columns:repeat(4, 1fr);
            gap:var(--gap);
            padding: 10px;
            justify-items: center;
            align-content: center;
            opacity:0; transition:opacity 1.1s ease;
            z-index: 500;
        }

        @media (orientation: landscape) {
            #game-board { grid-template-columns:repeat(5, 1fr); }
        }

        .card {
            width:var(--card-w); height:var(--card-h);
            position:relative; transform-style:preserve-3d;
            transition:transform 0.6s cubic-bezier(0.23,1,0.32,1);
            cursor:pointer;
            -webkit-tap-highlight-color:transparent;
            will-change: transform;
        }

        .card.flipped { transform:rotateY(180deg); }

        .face {
            position:absolute; inset:0;
            backface-visibility:hidden; -webkit-backface-visibility:hidden;
            border-radius:8px; border:1px solid var(--blood-dark);
            overflow:hidden; background:#000;
        }

        .front {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #000 0%, #1a0000 100%);
            box-shadow: inset 0 0 15px var(--blood-dark);
            background-size: cover; background-position: center;
        }

        .back-video {
            width:100%; height:100%; object-fit:cover; opacity:0.85;
        }

        /* --- UI Elements --- */
        #deck-frame {
            position:fixed; bottom:15px; right:15px; z-index:400;
            width:50px; height:70px;
            background:rgba(40,0,0,0.35); backdrop-filter:blur(8px);
            border:1px solid var(--blood-glow); border-radius:8px;
            overflow:hidden;
        }

        #match-counter {
            position:absolute; bottom:2px; left:0; right:0;
            text-align:center; font-size:8px; color:var(--blood-glow);
        }

        #landing {
            position:fixed; inset:0; z-index:2000; background:#000;
            display:flex; flex-direction:column; align-items:center; justify-content:center;
            transition:opacity 0.8s;
        }

        .btn-void {
            padding:15px 40px; border:2px solid var(--blood-glow);
            background:rgba(0,0,0,0.8); color:var(--blood-glow);
            font-size:1.2rem; letter-spacing:5px; cursor:pointer;
        }

        #leaderboard-overlay {
            position:fixed; inset:0; display:none; flex-direction:column;
            align-items:center; justify-content:center; z-index:2500; background:rgba(0,0,0,0.95);
        }
    </style>
</head>
<body>

<div class="blood-header">STARBLOOD</div>

<div id="landing">
    <button class="btn-void">ENTER VOID</button>
</div>

<div id="deck-frame">
    <div id="match-counter">0/10</div>
</div>

<div id="game-board"></div>

<div id="leaderboard-overlay">
    <div class="holo-frame" style="border:1px solid var(--blood-glow); padding:20px; text-align:center;">
        <h2 style="color:var(--blood-glow); margin-bottom:20px;">RECORDS</h2>
        <div id="score-list"></div>
        <button class="btn-void" onclick="location.reload()" style="margin-top:20px;">RESTART</button>
    </div>
</div>

<script>
const faceFiles = [
    "./api/asset/Screenshot_2026-01-20-15-02-24-76.jpg",
    "./api/asset/Screenshot_2026-01-20-15-05-56-58.jpg",
    "./api/asset/Screenshot_2026-01-20-15-06-24-65.jpg",
    "./api/asset/Screenshot_2026-01-20-15-06-39-34.jpg",
    "./api/asset/Screenshot_2026-01-20-15-07-31-75.jpg",
    "./api/asset/Screenshot_2026-01-20-15-09-18-64.jpg",
    "./api/asset/Screenshot_2026-01-20-15-09-46-94.jpg",
    "./api/asset/Screenshot_2026-01-20-15-09-59-72.jpg",
    "./api/asset/Screenshot_2026-01-20-15-10-12-71.jpg",
    "./api/asset/Screenshot_2026-01-20-15-10-25-20.jpg"
];

let flipped = [];
let locked = false;
let matches = 0;
let timerStart = null;

const board = document.getElementById('game-board');

document.querySelector('.btn-void').addEventListener('pointerdown', (e) => {
    document.getElementById('landing').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('landing').style.display = 'none';
        board.style.opacity = '1';
        timerStart = Date.now();
        buildBoard();
    }, 800);
});

function buildBoard() {
    let deck = [...faceFiles, ...faceFiles].sort(() => Math.random() - 0.5);
    board.innerHTML = '';

    deck.forEach(img => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.val = img;
        card.innerHTML = `
            <div class="face front" style="background-image:url('${img}')"></div>
            <div class="face back" style="background: #000;">
                <div style="width:100%; height:100%; border: 1px solid #400;"></div>
            </div>
        `;

        card.addEventListener('pointerdown', () => {
            if (locked || flipped.length >= 2 || card.classList.contains('flipped')) return;
            card.classList.add('flipped');
            flipped.push(card);
            if (flipped.length === 2) {
                locked = true;
                setTimeout(checkMatch, 600);
            }
        });
        board.appendChild(card);
    });
}

function checkMatch() {
    const [a, b] = flipped;
    if (a.dataset.val === b.dataset.val) {
        matches++;
        document.getElementById('match-counter').textContent = `${matches}/10`;
        setTimeout(() => {
            a.style.opacity = '0'; b.style.opacity = '0';
            flipped = []; locked = false;
            if (matches === 10) finish();
        }, 400);
    } else {
        setTimeout(() => {
            a.classList.remove('flipped'); b.classList.remove('flipped');
            flipped = []; locked = false;
        }, 800);
    }
}

function finish() {
    const time = ((Date.now() - timerStart) / 1000).toFixed(2);
    document.getElementById('score-list').innerHTML = `TIME: ${time}s`;
    document.getElementById('leaderboard-overlay').style.display = 'flex';
}
</script>
</body>
</html>
