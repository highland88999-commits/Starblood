<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>STARBLOOD</title>
    <style>
        :root { --blood: #ff3333; --dark: #8a0000; --card-h: clamp(80px, 18dvh, 140px); --card-w: calc(var(--card-h) * 0.72); }
        body { background: #000; color: white; font-family: monospace; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100dvh; }
        #nexus-bg { position: fixed; inset: 0; z-index: -1; opacity: 0.4; }
        #nexus-bg video { width: 100%; height: 100%; object-fit: cover; }
        .title { text-align: center; color: var(--blood); font-size: 2rem; padding: 20px; letter-spacing: 10px; text-shadow: 0 0 10px var(--dark); }
        #game-board { flex: 1; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 10px 20px; justify-items: center; align-content: center; z-index: 10; }
        .card-placeholder { width: var(--card-w); height: var(--card-h); background: rgba(255,255,255,0.05); border-radius: 8px; position: relative; }
        .card-entity { position: absolute; width: var(--card-w); height: var(--card-h); border-radius: 8px; border: 1px solid var(--dark); background: #000; overflow: hidden; cursor: pointer; transition: transform 0.6s cubic-bezier(0.2, 0, 0.2, 1); }
        .slider-track { display: flex; width: 200%; height: 100%; transition: transform 0.5s ease; }
        .card-entity.active .slider-track { transform: translateX(-50%); }
        .panel { width: 50%; height: 100%; }
        .video-panel video { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
        .image-panel { background-size: cover; background-position: center; border-left: 1px solid var(--dark); }
        #deck-frame { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 70px; border: 2px solid var(--blood); border-radius: 5px; background: rgba(138, 0, 0, 0.3); z-index: 100; cursor: pointer; }
    </style>
</head>
<body>
<div id="nexus-bg"><video autoplay muted loop playsinline><source src="/bg/nexus_render (8).webm"></video></div>
<div class="title">STARBLOOD</div>
<div id="game-board"></div>
<div id="deck-frame" onclick="commander.deploy()"></div>
<script>
// Pointing directly to /api/ per your GitHub files
const faceFiles = [
    "/api/Screenshot_2026-01-20-15-02-24-76.jpg",
    "/api/Screenshot_2026-01-20-15-05-56-58.jpg",
    "/api/Screenshot_2026-01-20-15-06-24-65.jpg",
    "/api/Screenshot_2026-01-20-15-06-39-34.jpg",
    "/api/Screenshot_2026-01-20-15-07-31-75.jpg",
    "/api/Screenshot_2026-01-20-15-09-18-64.jpg",
    "/api/Screenshot_2026-01-20-15-09-46-94.jpg",
    "/api/Screenshot_2026-01-20-15-09-59-72.jpg",
    "/api/Screenshot_2026-01-20-15-10-12-71.jpg",
    "/api/Screenshot_2026-01-20-15-10-25-20.jpg"
];
const cardVideo = "/bg/Videoleap_2026_01_20_18_07_56_976.mp4";
const commander = {
    selected: [],
    init() {
        const board = document.getElementById('game-board');
        for(let i=0; i<20; i++) {
            const slot = document.createElement('div');
            slot.className = 'card-placeholder';
            slot.id = `slot-${i}`;
            board.appendChild(slot);
        }
    },
    deploy() {
        if (document.querySelector('.card-entity')) return;
        const deck = [...faceFiles, ...faceFiles].sort(() => Math.random() - 0.5);
        const deckRect = document.getElementById('deck-frame').getBoundingClientRect();
        deck.forEach((path, i) => {
            const card = document.createElement('div');
            card.className = 'card-entity';
            card.dataset.val = path;
            card.innerHTML = `<div class="slider-track"><div class="panel video-panel"><video autoplay muted loop playsinline><source src="${cardVideo}"></video></div><div class="panel image-panel" style="background-image:url('${path}')"></div></div>`;
            document.body.appendChild(card);
            card.style.left = deckRect.left + 'px'; card.style.top = deckRect.top + 'px';
            const slot = document.getElementById(`slot-${i}`);
            const slotRect = slot.getBoundingClientRect();
            setTimeout(() => {
                card.style.transform = `translate(${slotRect.left - deckRect.left}px, ${slotRect.top - deckRect.top}px)`;
                setTimeout(() => {
                    card.style.transition = "none"; card.style.transform = "none";
                    card.style.left = "0"; card.style.top = "0";
                    slot.appendChild(card);
                }, 650);
            }, i * 30);
            card.onclick = () => {
                if (this.selected.length >= 2 || card.classList.contains('active')) return;
                card.classList.add('active');
                this.selected.push(card);
                if (this.selected.length === 2) {
                    setTimeout(() => {
                        if (this.selected[0].dataset.val !== this.selected[1].dataset.val) {
                            this.selected.forEach(c => c.classList.remove('active'));
                        }
                        this.selected = [];
                    }, 800);
                }
            };
        });
    }
};
window.onload = () => commander.init();
</script>
</body>
</html>
