<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>S T A R B L O O D</title>
    <style>
        :root {
            --blood-dark: #8a0000;
            --blood-glow: #ff3333;
            --card-w: clamp(70px, 18vw, 95px);
            --card-h: calc(var(--card-w) * 1.42);
            --gap: clamp(8px, 2vw, 14px);
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            background:#000; color:white;
            font-family:'Courier New', monospace;
            height:100vh; width:100vw;
            overflow:hidden;
            perspective: 1000px; /* Helps 3D rotation look correct on mobile */
            -webkit-user-select:none; user-select:none;
        }

        .blood-header {
            position:fixed; top:16px; left:0; right:0; z-index:1000;
            color:var(--blood-glow); letter-spacing:10px;
            font-size:clamp(1.6rem, 7vw, 2.8rem);
            text-shadow:0 0 16px var(--blood-dark);
            pointer-events:none; opacity:0.92; text-align:center;
        }

        #video-container {
            position:fixed; inset:0; z-index:-10; pointer-events:none;
        }
        .bg-vid-main {
            width:100%; height:100%; object-fit:cover; opacity:0.38;
        }

        #game-board {
            position:relative; z-index:500;
            display:grid; grid-template-columns:repeat(4,1fr);
            gap:var(--gap); padding:90px 20px 80px;
            opacity:0; transition:opacity 1.1s ease;
            height:100%; align-content:center; justify-content:center;
        }

        @media (orientation: landscape) {
            #game-board { grid-template-columns:repeat(5,1fr); padding-top:70px; }
        }

        .card {
            width:var(--card-w); height:var(--card-h);
            position:relative; transform-style:preserve-3d;
            transition:transform 0.65s cubic-bezier(0.23,1,0.32,1);
            cursor:pointer;
            -webkit-tap-highlight-color:transparent;
            perspective: 1000px; /* Local perspective boost */
        }

        .card.flipped { transform:rotateY(180deg); }

        .face {
            position:absolute; inset:0;
            backface-visibility:hidden; -webkit-backface-visibility:hidden;
            border-radius:9px; border:1px solid var(--blood-dark);
            overflow:hidden; background:#000;
        }

        .front { 
            transform: rotateY(180deg); 
            background: lime !important; /* Keep test â€” remove later */
            background-size: cover; 
            background-position: center; 
        }

        .card.flipped .back {
            display: none; /* Completely remove video on flip - fixes overlap/no change */
        }

        .back-video {
            width:100%; height:100%; object-fit:cover; opacity:0.82;
        }

        /* Rest of your styles unchanged - landing, deck, leaderboard, etc. */
        #landing { position:fixed; inset:0; z-index:2000; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; transition:opacity 0.9s; }
        .landing-vid { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0.72; z-index:-1; }
        .btn-void { padding:18px 50px; border:2px solid var(--blood-glow); background:rgba(0,0,0,0.75); color:var(--blood-glow); font-size:1.4rem; letter-spacing:7px; cursor:pointer; transition:all 0.3s; }
        .btn-void:active { transform:scale(0.96); }
        #deck-frame { position:fixed; bottom:18px; right:18px; z-index:400; width:64px; height:90px; background:rgba(40,0,0,0.35); backdrop-filter:blur(10px); border:1px solid var(--blood-glow); border-radius:10px; overflow:hidden; transition:all 0.7s ease; }
        #deck-frame.minimized { width:48px; height:48px; border-radius:50%; }
        #match-counter { position:absolute; bottom:4px; left:0; right:0; text-align:center; font-size:9px; color:var(--blood-glow); text-shadow:0 0 6px #000; }
        #leaderboard-overlay { position:fixed; inset:0; display:none; flex-direction:column; align-items:center; justify-content:center; z-index:400; background:rgba(0,0,0,0.9); }
        .holo-frame { background:rgba(20,0,0,0.6); backdrop-filter:blur(12px); border:1px solid var(--blood-glow); padding:24px; border-radius:15px; width:88%; max-width:460px; text-align:center; }
        .push-active #video-container { filter: url(#push-distort-strong); }
    </style>
</head>
<body>

<!-- SVG filter, entity-flash div, blood-header, video-container, landing, deck-frame, game-board, leaderboard-overlay remain the same as your last version -->

<script>
// Your full script remains the same, but change the event to 'click':
// In buildBoard():
card.addEventListener('click', () => {
    if (locked || flipped.length >= 2 || card.classList.contains('flipped')) return;

    card.classList.add('flipped');
    flipped.push(card);

    if (flipped.length === 2) {
        locked = true;
        setTimeout(checkMatch, 700);
    }
});

// Rest of script unchanged
</script>
</body>
</html>
